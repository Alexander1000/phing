<?xml version="1.0" ?>

<project name="tests.tokensource" default="main">

    <target name="main" >
        <echo msg="Testing" />

        <!-- Test calling ReplaceTokens normally -->
        <copy todir=".">
            <fileset dir=".">
                <include name="test.txt" />
            </fileset>
            
            <mapper type="glob" from="*.txt" to="*.new1.txt" />

            <filterchain>
                <replacetokens>
                    <tokensource classname="Phing.Filter.Util.IniFileTokenReader">
                        <param name="file" value="tokens.ini" />
                    </tokensource>
                </replacetokens>
            </filterchain>
        </copy>
        <!-- Test calling ReplaceTokens with FilterReader -->
        <copy todir=".">
            <fileset dir=".">
                <include name="test.txt" />
            </fileset>
            
            <mapper type="glob" from="*.txt" to="*.new2.txt" />

            <filterchain>
                <filterreader classname="Phing.Filter.ReplaceTokens">
                    <param type="tokensource">
                        <!-- Used by TokenSource -->
                        <param name="classname" value="Phing.Filter.Util.IniFileTokenReader" />
                        <!-- Given to the TokenReader -->
                        <param name="file" value="tokens.ini" />
                    </param>
                </filterreader>
            </filterchain>

        </copy>
    </target>
</project>
